{"changed":true,"filter":false,"title":"testing.html","tooltip":"/testing.html","value":"<canvas id=\"tetris\" width=\"500\" height=\"500\" style=\"border:1px\"> </canvas>\n<script>\n\nvar c = document.getElementById(\"myCanvas\");\nvar ctx = c.getContext(\"2d\");\n\nclass Tetrimino {\n    constructor(){\n        switch (random_tetrimino()) {\n            case \"I\":\n                this.a = {x: 3,y: 0},this.b = {x: 4,y: 0},this.c = {x: 5,y: 0},this.d = {x: 6,y: 0};\n                this.colour = \"cyan\";\n                break;\n            case \"J\":\n                this.a = {x: 4,y: 0},this.b = {x: 5,y: 0},this.c = {x: 6,y: 0},this.d = {x: 6,y: 1};\n                this.colour = \"blue\";\n                break;\n            case \"L\":\n                this.a = {x: 3,y: 0},this.b = {x: 4,y: 0},this.c = {x: 5,y: 0},this.d = {x: 1,y: 3};\n                this.colour = \"orange\";\n                break;\n            case \"O\":\n                this.a = {x: 4,y: 0},this.b = {x: 5,y: 0},this.c = {x: 4,y: 1},this.d = {x: 5,y: 1};\n                this.colour = \"yellow\";\n                break;\n            case \"S\":\n                this.a = {x: 5,y: 0},this.b = {x: 6,y: 0},this.c = {x: 1,y: 4},this.d = {x: 1,y: 5};\n                this.colour = \"lime\";\n                break;\n            case \"T\":\n                var r = Math.floor(Math.random() * 2);\n                if (r === 0) {\n                this.a = {x: 3,y: 0},this.b = {x: 4,y: 0},this.c = {x: 5,y: 0},this.d = {x: 4,y: 1};\n                } else {\n                this.a = {x: 4,y: 0},this.b = {x: 5,y: 0},this.c = {x: 6,y: 0},this.d = {x: 5,y: 1};\n                }\n                this.colour = \"purple\";\n                break;\n            case \"Z\":\n                this.a = {x: 3,y: 0},this.b = {x: 4,y: 0},this.c = {x: 4,y: 1},this.d = {x: 5,y: 1};\n                this.colour = \"red\";\n                break;\n        }\n    }\n    \n    \n    is_blocked(direction) {\n        for (var i = 0; i < 4; i++) {\n            var x = this.blocks[i].x;\n            var y = this.blocks[i].y;\n            switch (direction) {\n                case \"left\":\n                    if (!map[x++][y] && x++ <= 10 && i == 4) {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                case \"right\":\n                    if (!map[x--][y] && x-- >= 1 && i == 4) {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                case \"down\":\n                    if (!map[x][y--] && y-- > 0 && i == 4) {\n                        return true;\n                    } else {\n                        return false;\n                    }\n            }\n        }\n    }\n    \n    \n    move(direction) {\n        if (!this.is_blocked(direction)) {\n            for (var i = 0; i < 4; i++) {\n                switch (direction) {\n                    case \"left\":\n                        this.blocks[i].x--;\n                        break;\n                    case \"right\":\n                        this.blocks[i].x++;\n                        break;\n                    case \"down\":\n                        this.blocks[i].y--;\n                        break;\n                }\n            }\n        }\n    }\n    rotate\n}\n\nvar map = [[[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']]\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],\n          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']]]\n\nvar score = 0;\n\nvar types = [\n    \"I\",\n    \"J\",\n    \"L\",\n    \"O\",\n    \"S\",\n    \"T\",\n    \"Z\"\n];\n\nvar blocks = [\n    \"a\",\n    \"b\",\n    \"c\",\n    \"d\"\n];\n\nvar next_tet = new Tetrimino;\nvar crnt_tet = next_tet;\nnext_tet = new Tetrimino;\n\nsetInterval(function() {                    \n    if (crnt_tet.is_blocked(\"down\")){\n        lock();\n        score += 4;\n    } else {\n        crnt_tet.move(\"down\");\n    if (height() >= 20){\n        \n    }\n    }}, 10);\n        \n        \nfunction lock() {\n    for (var i = 0; i < 4; i++) {\n        map[crnt_tet.blocks[i].x] = crnt_tet.colour;\n        map[crnt_tet.blocks[i].y] = crnt_tet.colour;\n        var next_tet = new Tetrimino;\n        var crnt_tet = next_tet;\n        next_tet = new Tetrimino;\n    }\n    \n}\n        \n        \nfunction random_tetrimino() {\n    var r = Math.floor(Math.random() * 7);\n    return types[r];\n}\n\nfunction draw() {\n    for (var i = 0; i < 4; i++) {\n        ctx.beginPath();\n        ctx.rect(crnt_tet.blocks[i].x * 10, crnt_tet.blocks[i].y, 10, 10);\n        ctx.fillStyle = crnt_tet.colour;\n        ctx.fill();\n    }\n    for (let x in map) {\n        for (let y in map[x]) {\n            if (map[x][y] != ''){\n                ctx.beginPath();\n                ctx.rect(10*x, 10*y, 10, 10)\n                ctx.fillStyle = map[x][y];\n                ctx.fill();\n            }\n        }\n    }\n}\n\nfunction height(){\n    for (var i in map)\n        if (map[i] != [[''],[''],[''],[''],[''],[''],['']])\n        return i\n}\n</script>","undoManager":{"mark":-2,"position":2,"stack":[[{"start":{"row":0,"column":44},"end":{"row":0,"column":63},"action":"insert","lines":[" style=\"border:1px\""],"id":2281,"ignore":true},{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"insert","lines":["",""]},{"start":{"row":93,"column":46},"end":{"row":93,"column":61},"action":"insert","lines":[",[''],[''],['']"]},{"start":{"row":94,"column":45},"end":{"row":95,"column":11},"action":"remove","lines":["],","          ["]},{"start":{"row":94,"column":45},"end":{"row":95,"column":26},"action":"insert","lines":[",[''],[''],['']],","          [[''],[''],[''],"]},{"start":{"row":96,"column":45},"end":{"row":96,"column":60},"action":"insert","lines":[",[''],[''],['']"]},{"start":{"row":97,"column":45},"end":{"row":98,"column":11},"action":"remove","lines":["],","          ["]},{"start":{"row":97,"column":45},"end":{"row":98,"column":26},"action":"insert","lines":[",[''],[''],['']],","          [[''],[''],[''],"]},{"start":{"row":99,"column":45},"end":{"row":100,"column":11},"action":"remove","lines":["],","          ["]},{"start":{"row":99,"column":45},"end":{"row":100,"column":26},"action":"insert","lines":[",[''],[''],['']],","          [[''],[''],[''],"]},{"start":{"row":101,"column":45},"end":{"row":102,"column":11},"action":"remove","lines":["],","          ["]},{"start":{"row":101,"column":45},"end":{"row":112,"column":26},"action":"insert","lines":[",[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']]","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],[''],[''],[''],[''],[''],[''],['']],","          [[''],[''],[''],"]},{"start":{"row":135,"column":0},"end":{"row":135,"column":4},"action":"remove","lines":["var "]},{"start":{"row":143,"column":4},"end":{"row":146,"column":0},"action":"insert","lines":["if (height() >= 20){","        ","    }",""]},{"start":{"row":151,"column":36},"end":{"row":151,"column":40},"action":"remove","lines":["true"]},{"start":{"row":151,"column":36},"end":{"row":151,"column":51},"action":"insert","lines":["crnt_tet.colour"]},{"start":{"row":152,"column":36},"end":{"row":152,"column":40},"action":"remove","lines":["true"]},{"start":{"row":152,"column":36},"end":{"row":155,"column":32},"action":"insert","lines":["crnt_tet.colour;","        var next_tet = new Tetrimino;","        var crnt_tet = next_tet;","        next_tet = new Tetrimino"]},{"start":{"row":168,"column":0},"end":{"row":169,"column":0},"action":"insert","lines":["        ctx.beginPath();",""]},{"start":{"row":169,"column":73},"end":{"row":171,"column":19},"action":"insert","lines":[";","        ctx.fillStyle = crnt_tet.colour;","        ctx.fill();"]},{"start":{"row":183,"column":1},"end":{"row":189,"column":1},"action":"insert","lines":["","","function height(){","    for (var i in map)","        if (map[i] != [[''],[''],[''],[''],[''],[''],['']])","        return i","}"]}],[{"start":{"row":90,"column":5},"end":{"row":91,"column":4},"action":"insert","lines":["","    "],"id":2282,"ignore":true}],[{"start":{"row":91,"column":4},"end":{"row":91,"column":10},"action":"insert","lines":["rotate"],"id":2283,"ignore":true}]]},"ace":{"folds":[],"scrolltop":240,"scrollleft":0,"selection":{"start":{"row":191,"column":9},"end":{"row":191,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1459712294266}